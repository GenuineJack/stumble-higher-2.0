<!DOCTYPE html><html><head><meta charset='utf-8'><title>Frame</title><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://cdn.tailwindcss.com'></script><style>:root{--brand:#FF6D0E}.btn{padding:.5rem 1rem;border-radius:9999px;background:var(--brand);font-size:.75rem;font-weight:600;width:2.5rem}.btn#next{flex:1;padding:.75rem 0;font-weight:700}.btn:hover{background:#e05f04}</style></head><body class='bg-zinc-900 text-white flex flex-col h-screen relative'><iframe id='f' class='flex-1 w-full bg-zinc-800' sandbox='allow-scripts allow-same-origin allow-popups allow-forms'></iframe><div id='load' class='absolute inset-0 hidden items-center justify-center bg-black/40'><svg class='animate-spin h-10 w-10' viewBox='0 0 24 24' fill='none'><circle cx='12' cy='12' r='10' stroke='white' stroke-width='4' class='opacity-25'/><path d='M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z' fill='white' class='opacity-75'/></svg></div><div class='bg-zinc-950/80 backdrop-blur-sm p-3 space-y-2'><div><h2 id='t' class='font-semibold text-sm truncate'></h2><p id='d' class='text-xs opacity-70 truncate'></p></div><div class='flex items-center gap-2'><button id='home' class='btn'>🏠</button><button id='open' class='btn'>🌐</button><button id='next' class='btn' style='width:auto'>STUMBLE&nbsp;HIGHER</button><button id='share' class='btn'>📤</button></div></div><script type='module'>const Ready=()=>parent.postMessage({type:'ready'},'*');const Share=t=>parent.postMessage({type:'compose_cast',text:t},'*');let list=[],cur=null,timer=null;const TIMEOUT=3000;const iframe=document.getElementById('f'),loader=document.getElementById('load'),title=document.getElementById('t'),desc=document.getElementById('d');iframe.addEventListener('load',()=>{loader.classList.add('hidden');if(timer){clearTimeout(timer);timer=null}});function yt(u){const id=(u.includes('watch')?new URL(u).searchParams.get('v'):u.split('/').pop()).substring(0,11);return'https://www.youtube.com/embed/'+id}function proxy(u){return /youtu/.test(u)?yt(u):'/api/proxy?u='+encodeURIComponent(u)+'&ua='+encodeURIComponent(navigator.userAgent)}function pick(){if(!list.length)return null;let p=list[Math.random()*list.length|0];while(list.length>1&&p===cur)p=list[Math.random()*list.length|0];return p}function show(r){if(!r)return;cur=r;loader.classList.remove('hidden');if(timer)clearTimeout(timer);timer=setTimeout(()=>show(pick()),TIMEOUT);iframe.src=proxy(r.url);title.textContent='#'+r.id+' — '+r.title;desc.textContent=r.author||r.description||''}home.onclick=()=>location.href='/';open.onclick=()=>cur&&window.open(cur.url,'_blank');next.onclick=()=>show(pick());share.onclick=()=>cur&&Share(`Found "${cur.title}" on Stumble Higher – ${cur.url}`);const data=await fetch('resources.json').then(r=>r.json());list=(Array.isArray(data)?data:data.resources)||[];show(pick());if(parent!==window)Ready();</script></body></html>